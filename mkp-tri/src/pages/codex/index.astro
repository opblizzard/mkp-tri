---
import Layout from "@components/Layout.astro";
import Header from "@components/Header.astro";
import Footer from "@components/Footer.astro";
import CodexEntry from "@components/CodexEntry.astro";
import { getCodexEntries } from "@lib/codex";

const entries = getCodexEntries();
---

<Layout title="MKP-TRI Â· Codex" description="Ceremonial checkpoints and artifacts for MKP-TRI.">
  <Header />

  <section>
    <h2 class="text-lg font-semibold mb-2">Codex</h2>
    <p class="text-sm text-mkp-muted mb-4">
      A chronological list of cycles and artifacts. Each entry is a sovereign event, bound to a commit.
    </p>

    {entries.length === 0 ? (
      <p class="text-sm text-mkp-muted">No entries yet. The codex is waiting for its first inscription.</p>
    ) : (
      entries
        .slice()
        .sort((a, b) => (a.timestamp < b.timestamp ? 1 : -1))
        .map((entry) => <CodexEntry {...entry} />)
    )}
  </section>

  <Footer />
</Layout>
